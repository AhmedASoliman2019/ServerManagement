@page "/servers"
@rendermode InteractiveServer
@inject NavigationManager NavMan

<div>
    <h1>Select city</h1>
    <div class="container-fluid text-center">
        <div class="row w-50">
            @foreach (string c in cities)
            {
                <div class="col">
                    <div class="card" style="border: @(c == CurrentCity ? "Double" : "Single")">
                        <img src="@($"/images/{c}.png")" class="card-img-top">
                        <div class="card-body">
                            <button type="button" class="btn btn-secondary" @onclick="@(() => { CurrentCity=c; } )">@c</button>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
<br />
<br />
@CurrentCity
<h3>Servers listing</h3>
<br />
<br />
<div class="input-group col-md-3">
    <input type="text" class="form-control" placeholder="Search Servers" @bind-value="SearchServer" @bind-value:event="oninput" />
</div>
<ServersComponent @rendermode="InteractiveServer" CityName="@CurrentCity"></ServersComponent>
<a href="/AddServer">Add New</a>
<p>
    <button class="btn btn-outline-secondary" @onclick="@(() =>
                                                          {
                                                          AllServers.Insert(0, new Server { Name = "new server", City = "GLOBAL" });
                                                          })">
        Add Server 2
    </button>
</p>
@code{
    private string CurrentCity { get; set; }
    public string SearchServer { get; set; }
    private List<Server> AllServers = ServersRepository.GetServres();
    private List<string> cities = CitiesRepository.GetCities();
}
